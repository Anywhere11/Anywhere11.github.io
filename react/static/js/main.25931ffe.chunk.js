(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/avatar.32c2bd9d.jpg"},115:function(e,t,a){e.exports=a(240)},116:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){e.exports=a.p+"static/media/guide1.6493c30a.jpg"},217:function(e,t,a){e.exports=a.p+"static/media/guide2.58d094f7.jpg"},218:function(e,t,a){e.exports=a.p+"static/media/guide3.dc5fa5ba.jpg"},219:function(e,t,a){e.exports=a.p+"static/media/guide4.c7af6807.jpg"},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){e.exports=a.p+"static/media/img.04539f17.jpg"},231:function(e,t,a){e.exports=a.p+"static/media/img3.9045db8a.jpg"},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){e.exports=a.p+"static/media/background.c038fcc1.jpg"},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){"use strict";a.r(t);a(116);var n=a(9),i=a(0),c=a.n(i),o=a(11),l=a(12),r=a(14),s=a(13),m=a(15),u=a(18),d=Object(u.b)(),p=a(27),h=a.n(p),f=a(10);function g(e){f.m.hide(),f.m.fail(e,1)}h.a.defaults.baseURL="http://123.57.211.31:8883",h.a.interceptors.request.use(function(e){var t;return e.data=e.data||{},e.data.token=localStorage.token,t="\u52a0\u8f7d\u4e2d",f.m.hide(),f.m.loading(t,1,function(){}),e},function(e){return g("\u54cd\u5e94\u5931\u8d25"),Promise.reject(e)}),h.a.interceptors.response.use(function(e){var t;return t="\u6570\u636e\u52a0\u8f7d\u6210\u529f",f.m.hide(),f.m.success(t,1),e},function(e){return g("\u6570\u636e\u8bf7\u6c42\u5931\u8d25"),Promise.reject(e)});var v,E,b,y,k,j,O,N,C,w=a(103),S={get:function(e,t){var a=t.params;return new Promise(function(t,n){a=w.stringify(a);var i=new XMLHttpRequest;i.open("get","http://123.57.211.31:8880"+e+"?"+a,!0),i.onreadystatechange=function(){4===this.readyState&&(200===this.status?t({data:this.response}):n(new Error(this.statusTxt)))},i.responseType="json",i.setRequestHeader("Accept","application/json"),i.send()})}},L=a(112),T=a.n(L),x=a(37),D=a(38),I=(a(104),a(16)),M=new(v=function e(){Object(o.a)(this,e),Object(x.a)(this,"userInfo",E,this),Object(x.a)(this,"updateUserInfo",b,this),Object(x.a)(this,"updateUserAvatar",y,this)},E=Object(D.a)(v.prototype,"userInfo",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLogin:!1,mobile:"",avatar:"",token:""}}}),b=Object(D.a)(v.prototype,"updateUserInfo",[I.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userInfo=t}}}),y=Object(D.a)(v.prototype,"updateUserAvatar",[I.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userInfo.avatar=t}}}),v),B=a(50),U=a(33),z=(a(215),null),P=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).goToApp=function(){clearInterval(z),e.props.history.push("/app/home")},e.state={imgList:[a(216),a(217),a(218)],img:a(219),first:!0,countDown:5},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.first,n=t.countDown;return c.a.createElement("div",null,a&&c.a.createElement(f.c,{autoplay:!1},this.state.imgList.map(function(t,a){return c.a.createElement("div",{className:"guide-index",key:a},c.a.createElement("img",{src:t,alt:"",style:{width:"100%",verticalAlign:"top"}}),a==e.state.imgList.length-1&&c.a.createElement("span",{className:"guide-loop",onClick:e.goToApp},"\u8fdb\u5165APP"))})),!a&&c.a.createElement("div",{className:"guide-index"},c.a.createElement("img",{src:this.state.img,alt:""}),c.a.createElement("span",{className:"guide-time",onClick:this.goToApp},"\u8df3\u8fc7",n)))}},{key:"componentDidMount",value:function(){var e=this;localStorage.count?(localStorage.count++,this.setState({first:!1}),z=setInterval(function(){e.state.countDown>1?e.setState({countDown:--e.state.countDown}):(clearInterval(z),e.props.history.push("/app/home"))},1e3)):localStorage.count=1}}]),t}(i.Component),A=(a(220),a(221),a(222),f.h.Item),V=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).goBack=function(e){e&&d.go(-1)},e.goToSearch=function(){d.push("/search")},e.state={showSearch:!0},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.showBack,n=t.title,i=this.state.showSearch;return c.a.createElement("div",{className:"common-header"},c.a.createElement(f.g,{mode:"light",icon:a&&c.a.createElement(f.d,{type:"left",color:"#666"}),onLeftClick:function(){return e.goBack(a)},rightContent:[i&&c.a.createElement(f.d,{key:"0",type:"search",style:{marginRight:"16px"},onClick:this.goToSearch,color:"#666"}),c.a.createElement(_,{key:"1"})]},n))}},{key:"componentDidMount",value:function(){}}]),t}(i.Component),F={onTouchStart:function(e){return e.preventDefault()}},R=function(){var e=["\u62cd\u7167","\u4ece\u76f8\u518c\u9009\u62e9","\u53d6\u6d88"];f.a.showActionSheetWithOptions({options:e,cancelButtonIndex:e.length-1,destructiveButtonIndex:e.length-2,message:"\u8bf7\u9009\u62e9\u4e00\u5f20\u56fe\u7247",maskClosable:!0,"data-seed":"logId",wrapProps:F},function(e){console.log(e)})},_=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).handleVisibleChange=function(t){e.setState({visible:t})},e.onSelect=function(t){e.setState({visible:!1,selected:t.props.value});var a=t.props.value;"scan"==a?d.push("/scan"):"login"==a?d.push("/login"):"photo"==a&&R()},e.state={visible:!1,selected:""},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(f.h,{mask:!0,overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:this.state.visible,overlay:[c.a.createElement(A,{key:"4",value:"scan",icon:c.a.createElement("i",{className:"iconfont icon-saoma"}),"data-seed":"logId"},"\u626b\u4e00\u626b"),c.a.createElement(A,{key:"5",value:"login",icon:c.a.createElement("i",{className:"iconfont icon-log-in"}),style:{whiteSpace:"nowrap"}},"\u767b\u5165"),c.a.createElement(A,{key:"6",value:"photo",icon:c.a.createElement("i",{className:"iconfont icon-camera"})},c.a.createElement("span",{style:{marginRight:5}},"\u62cd\u7167"))],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:this.handleVisibleChange,onSelect:this.onSelect},c.a.createElement("div",{style:{height:"100%",padding:"0 15px",marginRight:"-15px",display:"flex",alignItems:"center"}},c.a.createElement(f.d,{type:"ellipsis"}))))}}]),t}(i.Component),G=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).banner=function(){S.get("/banner",{params:{type:1}}).then(function(t){e.setState({bannerList:t.data.banners})})},e.newList=function(){S.get("/top/album",{params:{limit:6}}).then(function(t){e.setState({newList:t.data.albums})})},e.newGuide=function(){S.get("/personalized",{params:{limit:6}}).then(function(t){e.setState({newGuide:t.data.result})})},e.newMv=function(){S.get("/top/mv",{params:{limit:5}}).then(function(t){e.setState({newMv:t.data.data})})},e.goToPlayList=function(t){e.props.history.push("/playlist/"+t)},e.goToMvDetail=function(t){e.props.history.push("/video/"+t)},e.state={bannerList:[],newList:[],newGuide:[],newMv:[]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.bannerList,n=t.newList,i=t.newGuide,o=t.newMv;return console.log(1,i),c.a.createElement("div",null,c.a.createElement(V,{title:"\u9996\u9875",showBack:!0}),c.a.createElement(f.c,{autoplay:!0,infinite:!0,style:{marginTop:".9rem"}},a.map(function(e,t){return c.a.createElement("img",{key:t,src:e.pic,alt:"",style:{width:"100%"},onLoad:function(){window.dispatchEvent(new Event("resize"))}})})),c.a.createElement("div",{className:"home-new-guide"},c.a.createElement("h3",null,"\u63a8\u8350\u6b4c\u5355"),c.a.createElement("div",{className:"home-guide-list"},i.map(function(t,a){return c.a.createElement("div",{className:"home--guide-img",key:a,onClick:function(){return e.goToPlayList(t.id)}},c.a.createElement("h4",null,c.a.createElement("img",{src:t.picUrl}),c.a.createElement("span",null,c.a.createElement("i",{className:"iconfont icon-bofangsanjiaoxing"}),t.playCount/1e4>1?(t.playCount/1e4).toFixed(1)+"\u4e07":Math.round(t.playCount))),c.a.createElement("p",null,t.name))}))),c.a.createElement("div",{className:"home-newlist"},c.a.createElement("h3",null,"\u65b0\u789f\u7cbe\u9009"),c.a.createElement("div",{className:"home-newbox"},n.map(function(e,t){return c.a.createElement("div",{className:"home-newitem",key:t},c.a.createElement("h4",null,c.a.createElement("img",{src:e.blurPicUrl})),c.a.createElement("p",null,e.name))}))),c.a.createElement("div",{className:"home-new-mv"},c.a.createElement("h3",null,"\u63a8\u8350MV"),c.a.createElement("div",{className:"home-guide-mv"},o.map(function(t,a){return c.a.createElement("div",{className:"home-img-mv",key:a,onClick:function(){return e.goToMvDetail(t.id)}},c.a.createElement("h4",null,c.a.createElement("img",{src:t.cover})),c.a.createElement("div",{className:"home-img-size"},c.a.createElement("p",null,t.name),c.a.createElement("h5",null,t.artistName),c.a.createElement("span",null,t.alias)))}))))}},{key:"componentDidMount",value:function(){this.banner(),this.newList(),this.newGuide(),this.newMv()}}]),t}(i.Component),q=(a(223),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).getArtistCategoryList=function(t){e.setState({artistCategoryList:[]}),S.get("/artist/list",{params:{limit:50,cat:t}}).then(function(t){e.setState({artistCategoryList:t.data.artists})})},e.changeTab=function(t){e.getArtistCategoryList(t.code)},e.goToDetail=function(t){e.props.history.push("/singer/"+t)},e.state={artistCategory:[{title:"\u534e\u8bed\u7537\u6b4c\u624b",code:"1001"},{title:"\u534e\u8bed\u5973\u6b4c\u624b",code:"1002"},{title:"\u534e\u8bed\u7ec4\u5408",code:"1003"},{title:"\u97e9\u56fd\u7537\u6b4c\u624b",code:"7001"},{title:"\u97e9\u56fd\u5973\u6b4c\u624b",code:"7002"},{title:"\u97e9\u56fd\u7ec4\u5408",code:"7003"},{title:"\u6b27\u7f8e\u7537\u6b4c\u624b",code:"2001"},{title:"\u6b27\u7f8e\u5973\u6b4c\u624b",code:"2002"},{title:"\u6b27\u7f8e\u7ec4\u5408",code:"2003"},{title:"\u65e5\u672c\u7537\u6b4c\u624b",code:"6001"},{title:"\u65e5\u672c\u5973\u6b4c\u624b",code:"6002"},{title:"\u65e5\u672c\u7ec4\u5408",code:"6003"}],artistCategoryList:[]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.artistCategoryList;return c.a.createElement("div",null,c.a.createElement(V,{title:"\u5206\u7c7b",showBack:!0}),c.a.createElement("div",{className:"music-classification"},c.a.createElement(f.l,{tabs:this.state.artistCategory,initialPage:0,onChange:function(t){return e.changeTab(t)}})),c.a.createElement("div",{className:"music-singer"},c.a.createElement("div",{className:"music-singer-list"},t.map(function(t,a){return c.a.createElement("div",{className:"music-singer-img zoom-in",key:a,onClick:function(){return e.goToDetail(t.id)}},c.a.createElement("h4",null,c.a.createElement("img",{src:t.picUrl})),c.a.createElement("div",{className:"music-singer-detial"},c.a.createElement("div",{className:"music-singer-left"},c.a.createElement("h3",null,t.name),c.a.createElement("span",null,t.albumSize,"\u5f20\u4e13\u8f91 | ",t.musicSize,"\u9996\u5355\u66f2")),c.a.createElement("i",{className:"iconfont icon-552cc1babd9aa"})))}))))}},{key:"componentDidMount",value:function(){var e=this.state,t=e.artistCategoryList,a=e.artistCategory;t.length<1&&this.getArtistCategoryList(a[0].code)}}]),t}(i.Component)),K=(a(224),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).getMusicMv=function(){S.get("/top/mv",{params:{limit:10}}).then(function(t){e.setState({musicMv:t.data.data})})},e.goToVideo=function(t){e.props.history.push("/video/"+t)},e.state={musicMv:[]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.musicMv;return console.log(t),c.a.createElement("div",null,c.a.createElement(V,{title:"\u89c6\u9891",showBack:!0}),c.a.createElement("div",{className:"mv-music"},t.map(function(t,a){return c.a.createElement("div",{className:"mv-list-item",key:a},c.a.createElement("img",{onClick:function(){return e.goToVideo(t.id)},src:t.cover,alt:""}),c.a.createElement("h4",null,t.artistName," | ",t.name))})))}},{key:"componentDidMount",value:function(){this.getMusicMv()}}]),t}(i.Component)),Z=(a(225),a(58)),H=Object(Z.a)(k=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).uploadFile=function(){e.ipt.click()},e.uploadAvatar=function(){var t=new FormData,a=e.ipt.files[0];t.append("avatar",a),h()({url:"/user/uploadAvatar?token="+localStorage.token,method:"POST",data:t,contentType:!1,processData:!1}).then(function(e){var t=e.data.avatarUrl.replace("public/","http://123.57.211.31:8883/");M.updateUserAvatar(t)})},e.logOut=function(){localStorage.removeItem("token"),localStorage.removeItem("count"),M.updateUserInfo({isLogin:!1,mobile:"",avatar:"",token:""}),f.m.offline("\u5df2\u9000\u51fa\u767b\u9646")},e.state={tabList:[{txt:"\u53e3\u888b\u94c3\u58f0",icon:"icon-icon--"},{txt:"\u6211\u7684\u8ba2\u5355",icon:"icon-dingdan2"},{txt:"\u4f18\u60e0\u5377",icon:"icon-wodeyouhuijuan"},{txt:"\u52a0\u5165\u7f51\u6613\u97f3\u4e50\u4eba",icon:"icon-yinle"},{txt:"\u5206\u4eab\u7f51\u6613\u4e91\u97f3\u4e50",icon:"icon-fenxiang"},{txt:"\u5728\u7ebf\u542c\u6b4c\u514d\u6d41\u91cf",icon:"icon-icon_zhibo-xian"},{txt:"\u97f3\u4e50\u95f9\u949f",icon:"icon-naozhong"},{txt:"\u5173\u4e8e",icon:"icon-about"}]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.tabList,a=M.userInfo,n=a.isLogin,i=a.mobile,o=M.userInfo.avatar.replace("public/","http://123.57.211.31:8883/");return c.a.createElement("div",null,c.a.createElement(V,{title:"\u6211",showBack:!0}),n&&c.a.createElement("div",{className:"mine-info"},c.a.createElement("div",{className:"mine-avatar"},c.a.createElement("img",{src:o,alt:""}),c.a.createElement("span",{onClick:this.uploadFile},"\u4e0a\u4f20\u5934\u50cf"),c.a.createElement("input",{type:"file",accept:"image/*",ref:function(t){return e.ipt=t},onChange:this.uploadAvatar,style:{display:"none"}})),c.a.createElement("div",{className:"mine-name"},c.a.createElement("p",null,i),c.a.createElement("span",null,"\u624b\u673a\u8ba4\u8bc1\u7528\u6237"))),!n&&c.a.createElement("div",{className:"mine-null"},c.a.createElement("h3",null,c.a.createElement("i",{className:"iconfont icon-gerenzhongxin"})),c.a.createElement(B.b,{to:"/login"},"\u524d\u5f80\u767b\u5165")),c.a.createElement("div",{className:"mine-msg"},c.a.createElement("ul",{className:"mine-list-buy"},c.a.createElement("li",null,c.a.createElement("i",{className:"iconfont icon-xiaoxi"}),c.a.createElement("span",null,"\u6d88\u606f")),c.a.createElement("li",null,c.a.createElement("i",{className:"iconfont icon-store_icon"}),c.a.createElement("span",null,"\u5546\u57ce")),c.a.createElement("li",null,c.a.createElement("i",{className:"iconfont icon-rili"}),c.a.createElement("span",null,"\u6f14\u51fa")),c.a.createElement("li",null,c.a.createElement("i",{className:"iconfont icon-pifuguanli"}),c.a.createElement("span",null,"\u4e2a\u6027\u6362\u80a4")))),c.a.createElement("ul",{className:"mine-tab"},t.map(function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("i",{className:"iconfont "+e.icon}),c.a.createElement("span",null,e.txt),c.a.createElement("i",{className:"iconfont icon-552cc1babd9aa"}))})),n&&c.a.createElement("div",{className:"mine-logout",onClick:this.logOut},"\u7acb\u5373\u6ce8\u9500"))}},{key:"componentDidMount",value:function(){}}]),t}(i.Component))||k,J=(a(228),new(j=function e(){Object(o.a)(this,e),Object(x.a)(this,"navTab",O,this),Object(x.a)(this,"changeTab",N,this)},O=Object(D.a)(j.prototype,"navTab",[I.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"home"}}),N=Object(D.a)(j.prototype,"changeTab",[I.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.navTab=t}}}),j)),W=Object(Z.a)(C=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).state={footList:[{txt:"\u9996\u9875",path:"/app/home",name:"home",icon:"icon-heijiaochangpianji"},{txt:"\u5206\u7c7b",path:"/app/classify",name:"classify",icon:"icon-z1"},{txt:"\u89c6\u9891",path:"/app/mv",name:"mv",icon:"icon-shipin"},{txt:"\u6211",path:"/app/mine",name:"mine",icon:"icon-gerenzhongxin"}]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=J.navTab,t=J.changeTab;return c.a.createElement("div",{style:{position:"fixed",width:"100%",height:".9rem",left:0,bottom:0}},c.a.createElement(f.k,{unselectedTintColor:"#949494",tintColor:"#33A3F4",barTintColor:"white",hidden:this.state.hidden},this.state.footList.map(function(a,n){return c.a.createElement(f.k.Item,{title:a.txt,key:n,icon:c.a.createElement("i",{className:"iconfont "+a.icon,style:{width:22,height:22,display:"block"}}),selectedIcon:c.a.createElement("i",{className:"iconfont "+a.icon,style:{width:22,height:22,display:"block"}}),selected:e==a.name,badge:2==n?99:0,onPress:function(){d.push(a.path),t(a.name)},"data-seed":"logId"})})))}},{key:"componentDidMount",value:function(){var e=location.hash.split("#/app/")[1];J.changeTab(e),localStorage.newTab=e}}]),t}(i.Component))||C,X=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(U.d,null,c.a.createElement(U.b,{path:"/app/home",component:G}),c.a.createElement(U.b,{path:"/app/classify",component:q}),c.a.createElement(U.b,{path:"/app/mv",component:K}),c.a.createElement(U.b,{path:"/app/mine",component:H}),c.a.createElement(U.b,{render:function(){return c.a.createElement(U.a,{to:"/app/home"})}})),c.a.createElement(W,null))}}]),t}(i.Component),$=(a(229),null),Y=/^1(3|5|7|8|9)\d{9}$/,Q=/^\d{4}$/,ee=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).regCheckMobile=function(t){var a=e.code.state.value;e.state.isChecking||e.setState({codeBtnDis:!Y.test(t),loginBtnDis:!(Y.test(t)&&Q.test(a))})},e.regCheckCode=function(t){var a=e.mobile.state.value;e.setState({loginBtnDis:!(Y.test(a)&&Q.test(t))})},e.startCountDown=function(){e.sendCode(),$=setInterval(function(){e.state.countDown>0?e.setState({codeBtnDis:!0,countDown:--e.state.countDown,showMsg:"\u5269\u4f59".concat(e.state.countDown,"\u79d2"),isChecking:!0}):(clearInterval($),$=null,e.setState({codeBtnDis:!1,countDown:60,showMsg:"\u83b7\u53d6\u9a8c\u8bc1\u7801",isChecking:!1}))},1e3)},e.sendCode=function(){var t=e.mobile.state.value;h.a.post("/verify/sendCode",{mobile:t}).then(function(e){var t=e.data,a=t.code,n=t.msg;1===a?f.m.success(n):f.m.fail(n)})},e.goToLogin=function(){var t=e.mobile.state.value,n=e.code.state.value;h.a.post("/verify/checkCode",{mobile:t,randCode:n}).then(function(t){var n=t.data,i=n.code,c=n.msg,o=n.token;1==i?(localStorage.token=o,h.a.post("user/info",{}).then(function(e){var t=e.data,n=t.code,i=t.msg,c=t.userInfo;if(1==n){var o=M.updateUserInfo;if(c.avatar)o({isLogin:!0,mobile:c.username,avatar:c.avatar,token:localStorage.token});else{var l=a(106);o({isLogin:!0,mobile:c.username,avatar:l,token:localStorage.token})}}else f.m.fail(i)}),e.props.history.push("/app/mine")):(localStorage.token=null,f.m.fail(c))})},e.state={codeBtnDis:!0,loginBtnDis:!0,isChecking:!1,showMsg:"\u83b7\u53d6\u9a8c\u8bc1\u7801",countDown:60,avatarUrl:a(230),backUrl:a(231)},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.codeBtnDis,n=t.loginBtnDis,i=t.showMsg,o=(t.avatarUrl,t.backUrl);return c.a.createElement("div",null,c.a.createElement(V,{title:"\u767b\u9646",showBack:!0}),c.a.createElement("div",{className:"login-back-img"},c.a.createElement("img",{src:o,alt:""})),c.a.createElement(f.o,null,c.a.createElement(f.f,null,c.a.createElement(f.n,null),c.a.createElement(f.e,{type:"tel",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",clear:!0,ref:function(t){return e.mobile=t},onChange:this.regCheckMobile},"\u624b\u673a\u53f7"),c.a.createElement(f.n,null),c.a.createElement(f.e,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",ref:function(t){return e.code=t},onChange:this.regCheckCode},"\u9a8c\u8bc1\u7801"),c.a.createElement(f.b,{type:"warning",inline:!0,className:"login-code",disabled:a,onClick:this.startCountDown},i),c.a.createElement(f.n,null),c.a.createElement(f.b,{type:"primary",disabled:n,onClick:this.goToLogin},"\u9a6c\u4e0a\u767b\u5165"))))}}]),t}(i.Component),te=(a(232),function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null)}}]),t}(i.Component)),ae=(a(233),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).searchValue=function(t){S.get("/search",{params:{keywords:t}}).then(function(t){e.setState({searchList:t.data.result.songs}),e.ipt.doClear()})},e.goToPlay=function(t,a){e.props.history.push("/play/"+t+"?name"+a)},e.state={searchList:[]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.searchList;return console.log(t),c.a.createElement("div",{className:"main-search"},c.a.createElement(V,{title:"\u641c\u7d22",showBack:!0}),c.a.createElement(f.i,{placeholder:"\u70b9\u51fb\u641c\u7d22",ref:function(t){return e.ipt=t},onSubmit:this.searchValue}),c.a.createElement("ul",{className:"search-list"},t&&t.map(function(t,a){return c.a.createElement("li",{key:a,className:"zoom-in",onClick:function(){return e.goToPlay(t.id)}},c.a.createElement("h6",null,c.a.createElement("span",null,a+1)),c.a.createElement("div",null,c.a.createElement("h3",null,c.a.createElement("i",{className:"iconfont icon-z1 "}),c.a.createElement("span",null,t.name)),c.a.createElement("h4",null,c.a.createElement("i",{className:"iconfont  icon-ren"}),c.a.createElement("span",null,t.album.name)),c.a.createElement("h5",null,c.a.createElement("i",{className:"iconfont icon-24gl-musicAlbum "}),t.artists.map(function(e,t){return c.a.createElement("span",{key:t},e.name,">")}))),c.a.createElement("p",null,c.a.createElement("i",{className:"iconfont icon-bofangsanjiaoxing"}),c.a.createElement("span",null,Math.floor(t.duration/1e3/60)+"\u5206"+Math.round(t.duration/1e3%60)+"\u79d2")))})))}}]),t}(i.Component)),ne=(a(234),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).getSingerInfo=function(t){S.get("/artists",{params:{id:t}}).then(function(t){e.setState({artist:t.data.artist,hotSongs:t.data.hotSongs})})},e.goToPlay=function(t,a){e.props.history.push("/play/"+t+"?name="+a)},e.state={artist:{},hotSongs:[],tabs:[{title:"\u70ed\u95e8\u5355\u66f2"},{title:"\u827a\u4eba\u7b80\u4ecb"}]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.artist,n=t.hotSongs,i=t.tabs;return c.a.createElement("div",null,c.a.createElement(V,{title:"\u6b4c\u624b",showBack:!0}),c.a.createElement("div",{className:"singer-list"},c.a.createElement("h3",null,c.a.createElement("img",{src:a.picUrl})),c.a.createElement("div",{className:"singer-class"},c.a.createElement("h5",null,a.name),c.a.createElement("span",null,a.albumSize,"\u5f20\u4e13\u8f91|",a.musicSize,"\u9996\u5355\u66f2|",a.mvSize,"\u652fMV"))),c.a.createElement("div",{className:"singer-hot"},c.a.createElement(f.l,{tabs:i},c.a.createElement("div",{className:"singer-list-demo"},n.map(function(t,a){return c.a.createElement("div",{className:"singer-guide",key:a,onClick:function(){return e.goToPlay(t.id,t.name)}},c.a.createElement("h3",null,c.a.createElement("img",{src:t.al.picUrl})),c.a.createElement("div",{className:"singer-detail"},c.a.createElement("div",null,c.a.createElement("h4",null,t.name),c.a.createElement("h5",null,t.al.name)),c.a.createElement("i",{className:"iconfont icon-icon_zhibo-xian"})))})),c.a.createElement("div",{className:"singer-desc"},a.briefDesc))))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getSingerInfo(e)}}]),t}(i.Component)),ie=(a(235),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).addZero=function(e){return e<10?"0"+e:e},e.getSongInfo=function(t){S.get("/song/url",{params:{id:t}}).then(function(t){e.setState({songUrl:t.data.data[0]});var a=e.audio;a.addEventListener("timeupdate",function(){var t=a.currentTime/a.duration*100;Math.abs(a.currentTime-e.state.playedTime)>.8&&e.setState({value:t,musicStart:"".concat(Math.floor(a.currentTime/60),":").concat(e.addZero(Math.floor(a.currentTime%60))),playedTime:a.currentTime,musicEnd:"".concat(Math.floor(a.duration/60),":").concat(e.addZero(Math.floor(a.duration%60)))})}),a.addEventListener("play",function(){var t=e.img,a=e.myIcon;t&&a&&(t.className="rotate play",a.className="iconfont icon-suspend_icon")}),a.addEventListener("pause",function(){var t=e.img,a=e.myIcon;t&&a&&(t.className="rotate pause",a.className="iconfont icon-bofang")})})},e.clickOnProgress=function(t){var a=e.audio;0!==a.currentTime&&(a.currentTime=a.duration*t/100)},e.getSongDetail=function(t){S.get("/song/detail",{params:{ids:t}}).then(function(t){e.setState({songDetail:t.data.songs[0]})})},e.getSongLyric=function(t){S.get("/lyric",{params:{id:t}}).then(function(t){e.setState({songLyric:t.data.lrc})})},e.toggle=function(){var t=e.audio;t.paused?t.play():t.pause()},e.changeLoop=function(t){e.setState({isLoop:!t})},e.changeForward=function(){var t=e.audio;t.currentTime=t.currentTime+10},e.changeBackward=function(){var t=e.audio;t.currentTime=t.currentTime-10},e.like=function(t){var a=localStorage.token,n=e.props.match.params.id;a&&n?h.a.post("/like/change",{id:n,flag:!t}).then(function(a){1==a.data.code&&e.setState({isLike:!t})}):f.m.fail("\u8bf7\u767b\u5f55")},e.getIsLike=function(t){h.a.post("/like/status",{id:t}).then(function(t){var a=t.data,n=a.code,i=a.isLike;1==n&&(e.setState({isLike:i}),console.log(1,t.data,i))})},e.goToComment=function(t){e.props.history.push("/comment/"+t)},e.state={title:"",songUrl:{},songDetail:{},songLyric:{},value:"",playedTime:"",musicStart:"",musicEnd:"",isLoop:!1,isLike:!1},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.title,i=t.songUrl,o=t.songDetail,l=(t.songLyric,t.value),r=t.musicStart,s=t.musicEnd,m=t.isLoop,u=t.isLike;return console.log(u),c.a.createElement("div",{style:{width:"100vw",height:"100vh",overflow:"hidden",background:"url(".concat(a(236),")"),backgroundSize:"100% 100%",position:"relative"}},c.a.createElement(V,{title:n,showBack:!0}),c.a.createElement("div",{className:"song-music"},c.a.createElement("audio",{src:i.url,ref:function(t){return e.audio=t},autoPlay:!0,loop:m})),c.a.createElement("div",{className:"disk-music"},c.a.createElement("h3",null,o.al&&c.a.createElement("img",{onClick:this.toggle,src:o.al.picUrl,alt:"",ref:function(t){return e.img=t}}))),c.a.createElement("div",{className:"disk-list"},c.a.createElement("div",{className:"disk-font"},c.a.createElement("i",{onClick:function(){return e.like(u)},className:u?"iconfont icon-heart":"iconfont icon-shoucang1",style:{color:u?"red":"white"}}),c.a.createElement("i",{className:"iconfont icon-ziyuan"}),c.a.createElement("i",{className:"iconfont icon-leaf"}),c.a.createElement("i",{className:"iconfont icon-xinxi",onClick:function(){return e.goToComment(e.props.match.params.id)}}),c.a.createElement("i",{onClick:this.goToComment,className:"iconfont icon-dots-vertical"})),c.a.createElement("div",{className:"disk-time"},c.a.createElement("span",null,r),c.a.createElement(f.j,{defaultValue:0,min:0,max:100,value:Number(l),onChange:function(t){return e.clickOnProgress(t)},trackStyle:{backgroundColor:"#eee"},railStyle:{backgroundColor:"rgba(255,245,247,.3)"},handleStyle:{width:".2rem",height:".2rem",marginTop:-4,marginLeft:-1,borderColor:"#fff"}}),c.a.createElement("span",null,s)),c.a.createElement("div",{className:"disk-name"},c.a.createElement("i",{onClick:function(){return e.changeLoop(m)},className:"iconfont icon-caozuo-xunhuan1",style:{color:m?"#fff":"#bbb"}}),c.a.createElement("i",{onClick:function(){return e.changeBackward()},className:"iconfont icon-play-prev-"}),c.a.createElement("i",{ref:function(t){return e.myIcon=t},onClick:this.toggle,className:"iconfont icon-bofang"}),c.a.createElement("i",{className:"iconfont icon-play-next-",onClick:this.changeForward}),c.a.createElement("i",{className:"iconfont icon-playlist"}))))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getSongInfo(e),this.getSongDetail(e),this.getSongLyric(e),this.getIsLike(e);var t,a=(t=this.props.location.search,T.a.parse(t,!0).query);this.setState({title:a.name})}}]),t}(i.Component)),ce=(a(237),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).getSongInfo=function(t){S.get("/song/detail",{params:{ids:t}}).then(function(t){e.setState({songDetail:t.data.songs[0]})})},e.getCommentList=function(t){h.a.post("/comment/list",{id:t}).then(function(t){var a=t.data.list.map(function(t){return t.date=e.getTimeStamp(t.date),t});e.setState({commentList:a})})},e.postComment=function(){var t=localStorage.token,a=e.props.match.params.id,n=e.ipt.state.value;t?h.a.post("/comment/add",{txt:n,songId:a}).then(function(t){var a=t.data,n=a.code,i=a.msg,c=a.list;if(1==n){f.m.success(i);var o=c.map(function(t){return t.date=e.getTimeStamp(t.date),t});e.setState({commentList:o}),e.ipt.clearInput()}}):f.m.fail("\u8bf7\u767b\u5f55")},e.getTimeStamp=function(e){var t=Number(e.substring(0,4)),a=Number(e.substring(5,7)),n=Number(e.substring(8,10)),i=Number(e.substring(11,13))+8,c=Number(e.substring(14,16)),o=Number(e.substring(17,19));return i>24&&(i-=24,n+=1),"".concat(t,"\u5e74").concat(a,"\u6708").concat(n,"\u65e5 ").concat(i,":").concat(c,":").concat(o)},e.handleEnterKey=function(t){13==t.keyCode&&e.postComment()},e.deleteList=function(t,a){h.a.post("/comment/delete/",{id:t}).then(function(t){var n=t.data,i=n.code,c=n.msg;1==i&&(e.state.commentList.splice(a,1),e.setState({commentList:e.state.commentList}),f.m.success(c))})},e.state={songId:"",songDetail:{},commentList:[]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.songDetail,n=t.commentList;return console.log(n),c.a.createElement("div",null,c.a.createElement(V,{title:"\u8bc4\u8bba",showBack:!0}),c.a.createElement("div",{className:"comment-list"},c.a.createElement("div",{className:"comment-left"},a.al&&c.a.createElement("img",{src:a.al.picUrl,alt:""})),c.a.createElement("ul",{className:"comment-right"},c.a.createElement("li",null,c.a.createElement("i",{className:"iconfont icon-MUSIC"}),a.name),a.ar&&c.a.createElement("li",null,c.a.createElement("i",{className:"iconfont icon-ren"}),a.ar.map(function(e,t){return c.a.createElement("span",{key:t},e.name)})),a.al&&c.a.createElement("li",null,c.a.createElement("i",{className:"iconfont icon-24gl-musicAlbum"}),a.al.name))),c.a.createElement("div",{className:"comment-input"},c.a.createElement(f.e,{placeholder:"\u8bf7\u8f93\u5165\u8bc4\u8bba",clear:!0,ref:function(t){return e.ipt=t},style:{paddingRight:"1.2rem"}}),c.a.createElement("i",{className:"iconfont icon-send",onClick:function(){return e.postComment()}})),c.a.createElement("div",{className:"comment-inputItem"},c.a.createElement("div",{className:"comment-inputList"},n.map(function(t,a){return c.a.createElement("div",{className:"comment-list-item",key:a},c.a.createElement("h3",null,c.a.createElement("span",null,"\u7528\u6237\uff1a",t.username),c.a.createElement("span",null,"\u53d1\u8868\u65f6\u95f4\uff1a",t.date)),c.a.createElement("h4",null,c.a.createElement("p",null,t.content),c.a.createElement("i",{className:"iconfont icon-icon1",onClick:function(){return e.deleteList(t._id,a)}})))}))))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getSongInfo(e),this.getCommentList(e),document.addEventListener("keypress",this.handleEnterKey),this.setState({songId:e})}},{key:"componentWillMount",value:function(){document.removeEventListener("keypress",this.handleEnterKey)}}]),t}(i.Component)),oe=(a(238),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).getVideo=function(t){S.get("/mv/url",{params:{id:t}}).then(function(t){e.setState({video:t.data.data.url})})},e.closePage=function(){d.go(-1)},e.state={video:""},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.video;return console.log(e),c.a.createElement("div",{className:"main-video"},c.a.createElement("video",{src:e,controls:!0,autoPlay:!0}),c.a.createElement("i",{className:"iconfont icon-chenghao",onClick:this.closePage}))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getVideo(e)}}]),t}(i.Component)),le=(a(239),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).getSingerInfo=function(t){S.get("/playlist/detail",{params:{id:t}}).then(function(t){e.setState({playlist:t.data.playlist})})},e.goToPlay=function(t,a){e.props.history.push("/play/"+t+"?name="+a)},e.state={playlist:[],tabs:[{title:"\u6b4c\u5355\u5217\u8868"},{title:"\u6b4c\u5355\u7b80\u4ecb"}]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.playlist,n=t.tabs;return console.log(a),c.a.createElement("div",null,c.a.createElement(V,{title:"\u6b4c\u5355",showBack:!0}),c.a.createElement("div",{className:"singer-list"},c.a.createElement("h3",null,c.a.createElement("img",{src:a.coverImgUrl})),c.a.createElement("div",{className:"singer-class"},c.a.createElement("h5",null,a.name),c.a.createElement("span",null,a.trackCount,"\u9996\u6b4c\u66f2"))),c.a.createElement("div",{className:"singer-hot"},c.a.createElement(f.l,{tabs:n},c.a.createElement("div",{className:"singer-list-demo"},a.tracks&&a.tracks.map(function(t,a){return c.a.createElement("div",{className:"singer-guide",key:a,onClick:function(){return e.goToPlay(t.id,t.name)}},c.a.createElement("h3",null,c.a.createElement("img",{src:t.al.picUrl})),c.a.createElement("div",{className:"singer-detail"},c.a.createElement("div",null,c.a.createElement("h4",null,t.name),c.a.createElement("h5",null,t.al.name)),c.a.createElement("i",{className:"iconfont icon-icon_zhibo-xian"})))})),c.a.createElement("div",{className:"singer-desc"},a.description))))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getSingerInfo(e)}}]),t}(i.Component)),re=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(B.a,{basename:"/"},c.a.createElement(U.b,{component:se}))}}]),t}(i.Component),se=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"main",style:{padding:"0 0 .9rem 0"}},c.a.createElement(U.d,null,c.a.createElement(U.b,{path:"/",exact:!0,render:function(){return c.a.createElement(U.a,{to:"/guide"})}}),c.a.createElement(U.b,{path:"/guide",component:P}),c.a.createElement(U.b,{path:"/app",component:X}),c.a.createElement(U.b,{path:"/scan",component:te}),c.a.createElement(U.b,{path:"/login",component:ee}),c.a.createElement(U.b,{path:"/search",component:ae}),c.a.createElement(U.b,{path:"/singer/:id",component:ne}),c.a.createElement(U.b,{path:"/play/:id?",component:ie}),c.a.createElement(U.b,{path:"/comment/:id?",component:ce}),c.a.createElement(U.b,{path:"/video/:id?",component:oe}),c.a.createElement(U.b,{path:"/playlist/:id?",component:le}),c.a.createElement(U.b,{render:function(){return c.a.createElement(U.a,{to:"/app/home"})}})))}},{key:"componentDidMount",value:function(){h.a.post("user/info",{}).then(function(e){var t=e.data,n=t.code,i=t.msg,c=t.userInfo;if(1==n){var o=M.updateUserInfo;if(c.avatar)o({isLogin:!0,mobile:c.username,avatar:c.avatar,token:localStorage.token});else{var l=a(106);o({isLogin:!0,mobile:c.username,avatar:l,token:localStorage.token})}}else f.m.fail(i)})}}]),t}(i.Component),me=document.getElementById("root");Object(n.render)(c.a.createElement(re,null),me)}},[[115,1,2]]]);
//# sourceMappingURL=main.25931ffe.chunk.js.map